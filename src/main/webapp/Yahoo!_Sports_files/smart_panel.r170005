
YAHOO.namespace('Sports.Ads');YAHOO.Sports.Ads.Darla={status:null,get:null,tries:0,config:null,path:null,load:function(){var i=this.config.callFrame;if(!YAHOO.util.Dom.get(i)){var c=document.createElement('iframe');c.id=i;c.style.display='none';document.body.appendChild(c);}
if(this.status!='dead'){if(YAHOO.util.Get&&!this.get&&this.status!='ready'){var s=function(){var $=YAHOO.Sports.Ads.Darla;$.get=null;$.status='ready';YAHOO.ads.darla.setConfig($.config);if($.f){$.f();}};var f=function(){var $=YAHOO.Sports.Ads.Darla;$.tries++;$.status=($.tries>4)?'failed':'dead';};var t=function(){YAHOO.Sports.Ads.Darla.status='dead';};this.get=YAHOO.util.Get.script(this.path,{onSuccess:s,onFailure:f,onTimeout:t,data:this,timeout:10000,varName:['YAHOO.ads.darla']});this.status='loading';}
return;}},init:function(p,config,f){this.path=p;this.config=config;this.f=f;return this;},registerAd:function(position,elementID){if(typeof YAHOO.Sports.Ads.Darla.config.destinationMap[position]=="undefined"){YAHOO.Sports.Ads.Darla.config.destinationMap[position]=[];}
if(typeof YAHOO.Sports.Ads.Darla.config.destinationMap[position][elementID]=="undefined"){YAHOO.Sports.Ads.Darla.config.destinationMap[position].push(elementID);}},unregisterAd:function(position,elementID){if(YAHOO.Sports.Ads.Darla.config.destinationMap[position][elementID]!='undefined'){var oldMap=YAHOO.Sports.Ads.Darla.config.destinationMap[position];var newMap=[];for(i=0;i<oldMap.length;i++){if(oldMap[i]!=elementID)newMap.push(oldMap[i]);}
YAHOO.Sports.Ads.Darla.config.destinationMap[position]=newMap;}},registerEvent:function(eventName,o){if(typeof YAHOO.Sports.Ads.Darla.config.events[eventName]=="undefined"){return YAHOO.Sports.Ads.Darla.config.events[eventName]=o;}
else return YAHOO.Sports.Ads.Darla.config.events[eventName];},subscribe:function(element,action,adObject){if(this.status=='dead')return;if(this.status!='ready'){this.load();setTimeout(function(){YAHOO.Sports.Ads.Darla.subscribe(element,action,adObject);},1000);return;}
var oIdx,oAdParam;if(typeof adObject=="object"){for(idx in adObject){oIdx=idx;};oAdParam=this.registerEvent(oIdx,adObject[oIdx]);}
else{oIdx=adObject;oAdParam=this.registerEvent(adObject);};var oAdConf={action:oIdx,lv:oAdParam.lv};switch(action){case"now":if(this.temp==null){this.temp={};this.temp.oAdConfArr=[];this.temp.oAdConfArr.push(oAdConf);setTimeout(this.fireInitialEvent,0);}
else{this.temp.oAdConfArr.push(oAdConf);};break;case"pageload":if(this.temp==null){this.temp={};this.temp.oAdConfArr=[];this.temp.oAdConfArr.push(oAdConf);YAHOO.util.Event.on(window,"load",YAHOO.Sports.Ads.Darla.fireInitialEvent);}
else{this.temp.oAdConfArr.push(oAdConf);};break;default:YAHOO.util.Event.on(element,action,this.fireEvent,oAdConf);break;}},fireEvent:function(e,obj){if(obj.action){YAHOO.ads.darla.event(obj.action,{lv:obj.lv});}},fireInitialEvent:function(){if(window.YAHOO.ads.darla)YAHOO.ads.darla.setConfig(YAHOO.Sports.Ads.Darla.config);for(idx in YAHOO.Sports.Ads.Darla.temp.oAdConfArr){YAHOO.Sports.Ads.Darla.fireEvent(null,YAHOO.Sports.Ads.Darla.temp.oAdConfArr[idx]);}
YAHOO.Sports.Ads.Darla.temp.oAdConf=null;YAHOO.Sports.Ads.Darla.temp=null;setTimeout('YAHOO.Sports.Ads.Darla.setRotation',2000);},setRotation:function(){YAHOO.Sports.Ads.Darla.config.rotation=YAHOO.Sports.Ads.Darla.config.rotation=YAHOO.Sports.Ads.Darla.config.finalRotation;},temp:null};YUD=YAHOO.util.Dom;YUE=YAHOO.util.Event;var DEFAULT_CONFIG={"CONTEXT_ELEMENT":{key:"contextEl",value:null},"SHOW_INDICATOR":{key:"showIndicator",value:false,validator:YAHOO.lang.isBoolean},"RESET_CONTEXT_ON_RESIZE":{key:"resetContextOnResize",value:true,validator:YAHOO.lang.isBoolean},"CLICK_ANYWHERE_TO_CLOSE":{key:"clickAnywhereToClose",value:false,validator:YAHOO.lang.isBoolean}};YAHOO.Sports.SmartPanel=function(el,userCfg){YAHOO.Sports.SmartPanel.superclass.constructor.call(this,el,userCfg);};YAHOO.extend(YAHOO.Sports.SmartPanel,YAHOO.widget.Panel,{indicator:null,state:'uninitialized',init:function(el,userConfig){YAHOO.Sports.SmartPanel.superclass.init.call(this,el,userConfig);this.beforeInitEvent.fire(YAHOO.Sports.SmartPanel);YUD.addClass(this.innerElement,'ys-smartpanel');this.initEvent.fire(YAHOO.Sports.SmartPanel);this.beforeShowEvent.subscribe(this.handleBeforeShowEvent);this.beforeHideEvent.subscribe(this.handleBeforeHideEvent);this.hideEvent.subscribe(this.handleHideEvent);},initDefaultConfig:function(){YAHOO.Sports.SmartPanel.superclass.initDefaultConfig.call(this);this.cfg.addProperty(DEFAULT_CONFIG.CONTEXT_ELEMENT.key,{handler:this.configContextElement,value:DEFAULT_CONFIG.CONTEXT_ELEMENT.value});this.cfg.addProperty(DEFAULT_CONFIG.SHOW_INDICATOR.key,{handler:this.configShowIndicator,value:DEFAULT_CONFIG.SHOW_INDICATOR.value,validator:DEFAULT_CONFIG.SHOW_INDICATOR.validator});this.cfg.addProperty(DEFAULT_CONFIG.RESET_CONTEXT_ON_RESIZE.key,{handler:this.configResetContextOnResize,value:DEFAULT_CONFIG.RESET_CONTEXT_ON_RESIZE.value,validator:DEFAULT_CONFIG.RESET_CONTEXT_ON_RESIZE.validator});this.cfg.addProperty(DEFAULT_CONFIG.CLICK_ANYWHERE_TO_CLOSE.key,{handler:this.configClickAnywhereToClose,value:DEFAULT_CONFIG.CLICK_ANYWHERE_TO_CLOSE.value,validator:DEFAULT_CONFIG.CLICK_ANYWHERE_TO_CLOSE.validator});},configContextElement:function(type,args,obj){var val=args[0];if(val){var ctx_el_id=YUD.generateId(val);this.ctxid=ctx_el_id;}},configShowIndicator:function(type,args,obj){var val=args[0],indicatorEl;if(val){if(YUD.getElementsByClassName('ys-smartpanel-indicator','H6',this.element).length<1){indicatorEl=document.createElement('H6');var indicatorText=document.createTextNode('More Information');YUD.addClass(indicatorEl,'ys-smartpanel-indicator');indicatorEl.appendChild(indicatorText);YUD.insertBefore(indicatorEl,this.innerElement.firstChild);this.indicator=indicatorEl;}
if(this.cfg.getProperty('draggable')){this.dragEvent.subscribe(this.hideIndicator);}}else{indicatorEl=YUD.getElementByClassName('ys-smartpanel-indicator','H6',this.element)[0];if(indicatorEl){this.element.removeChild(indicatorEl);this.indicator=null;}
if(this.cfg.getProperty('draggable')){this.dragEvent.unsubscribe(this.hideIndicator);}}},configResetContextOnResize:function(type,args,obj){var val=args[0];if(val){YAHOO.widget.Overlay.windowResizeEvent.subscribe(this.handleResizeEvent,this);YAHOO.widget.Module.textResizeEvent.subscribe(this.handleResizeEvent,this);}else{YAHOO.widget.Overlay.windowResizeEvent.unsubscribe(this.handleResizeEvent,this);YAHOO.widget.Module.textResizeEvent.unsubscribe(this.handleResizeEvent,this);}},configClickAnywhereToClose:function(type,args,obj){var val=args[0];if(val){YUE.addListener(document.body,'mousedown',this.clickAnywhereToClose,this);}else{YUE.removeListener(document.body,'mousedown',this.clickAnywhereToClose,this);}},handleBeforeShowEvent:function(){this.calculateContext();this.fadeInContent(this.element,25);this.setState('open');},handleBeforeHideEvent:function(){this.setState('close');},handleHideEvent:function(){this.setState('closed');},handleResizeEvent:function(type,obj,me){if(me.state=='open'||me.state=='loading'||me.state=='loaded'){me.hide();setTimeout(function(){me.show();if(me.cfg.getProperty('showIndicator')){me.showIndicator();}},300);}},clickAnywhereToClose:function(e,obj){var target=YUE.getTarget(e);if(obj.state!='loading'&&obj.state!='closed'&&!YUD.isAncestor(obj.element,target)){obj.hide();}},fadeInContent:function(el,speed){var fade_speed=speed||0.5;if(!YAHOO.env.ua.ie){this.element.style.opacity=0;var noteFade=new YAHOO.util.Anim(el,{opacity:{from:0,to:100}},fade_speed);noteFade.animate();}
return noteFade;},hideIndicator:function(){this.indicator.style.visibility='hidden';this.dragEvent.unsubscribe(this.hideIndicator);},showIndicator:function(){this.indicator.style.visibility='';this.dragEvent.subscribe(this.hideIndicator);},calculateContext:function(type,args,me){try{var oPanel=me||this;var ctxEl=YUD.get(oPanel.ctxid);if(ctxEl){var aCtxXY=YUD.getXY(oPanel.ctxid);var aConstXY=oPanel.getConstrainedXY(aCtxXY[0],aCtxXY[1]);var aOldContext=oPanel.cfg.getProperty('context');var overlay_corner='';var context_corner='';var center_y_context=((aCtxXY[1]!=aConstXY[1])&&aConstXY[1]>(aCtxXY[1]-(oPanel.element.offsetHeight/2)))?true:false;switch(true){case(aCtxXY[0]!=aConstXY[0]&&aCtxXY[1]!=aConstXY[1]):overlay_corner='br';context_corner='tl';break;case(aCtxXY[0]==aConstXY[0]&&aCtxXY[1]!=aConstXY[1]):overlay_corner='bl';context_corner='tr';break;case(aCtxXY[0]!=aConstXY[0]&&aCtxXY[1]==aConstXY[1]):overlay_corner='tr';context_corner='bl';break;default:overlay_corner='tl';context_corner='br';}
if(aOldContext){YUD.replaceClass(oPanel.element,'ys-smartpanel-'+aOldContext[1]+aOldContext[2],'ys-smartpanel-'+overlay_corner+context_corner);if(!center_y_context){YUD.removeClass(oPanel.element,'ys-smartpanel-ycentered');}else{YUD.addClass(oPanel.element,'ys-smartpanel-ycentered');}}else{YUD.addClass(oPanel.element,'ys-smartpanel-'+overlay_corner+context_corner);if(center_y_context){YUD.addClass(oPanel.element,'ys-smartpanel-ycentered');}}
oPanel.cfg.setProperty('context',[oPanel.ctxid,overlay_corner,context_corner,['beforeShow']]);var oldX=oPanel.cfg.getProperty('x');var oldY=oPanel.cfg.getProperty('y');var newX=oldX;var newY=oldY;var newIX=null;var newIY=null;var yOffset=(center_y_context)?oPanel.element.offsetHeight/2:oPanel.element.offsetHeight/3;var xIOffset=oPanel.indicator.offsetWidth;var yIOffset=oPanel.indicator.offsetHeight;switch(overlay_corner+context_corner){case'bltr':newX=(oldX+xIOffset)-1;newY=oldY+yOffset;newIX=aCtxXY[0]+ctxEl.offsetWidth;break;case'tlbr':newX=(oldX+xIOffset)-1;newY=oldY-yOffset;newIX=aCtxXY[0]+ctxEl.offsetWidth;break;case'brtl':newX=(oldX-xIOffset)+1;newY=oldY+yOffset;newIX=aCtxXY[0]-xIOffset;break;case'trbl':newX=(oldX-xIOffset)+1;newY=oldY-yOffset;newIX=aCtxXY[0]-xIOffset;break;}
oPanel.cfg.setProperty('xy',[newX,newY]);if(oPanel.indicator){if(ctxEl.offsetHeight>yIOffset){newIY=aCtxXY[1]+((ctxEl.offsetHeight/2)-(yIOffset/2));}else{newIY=aCtxXY[1]-((yIOffset/2)-(ctxEl.offsetHeight/2));}
YUD.setStyle(oPanel.indicator,'position','absolute');YUD.setStyle(oPanel.indicator,'zIndex',(YUD.getStyle(oPanel.element,'zIndex')+1));YUD.setXY(oPanel.indicator,[newIX,newIY]);}}}catch(e){}},setState:function(state){YUD.replaceClass(this.element,this.state,state);this.state=state;}});YAHOO.Sports.PlayerNote=function(ctxid){this.ctxid=ctxid;YAHOO.Sports.PlayerNote.superclass.constructor.call(this,'ys-playernote-dynamic-'+this.ctxid,{clickAnywhereToClose:true,draggable:true,dragOnly:true,resetContextOnResize:true,showIndicator:true,underlay:false,visible:false,zindex:'9000'});}
YAHOO.extend(YAHOO.Sports.PlayerNote,YAHOO.Sports.SmartPanel,{adPosition:'FB',getAdContainerId:function(){return this.element.id+'-'+this.adPosition;},selectedComp:0,origTargetUrl:null,init:function(el,userConfig){YAHOO.Sports.PlayerNote.superclass.init.call(this,el,userConfig);YUD.addClass(this.element,'ys-playernote-dynamic');YUD.addClass(this.element,'clearfix');var ncNaClass='';if(!this.showAds()){ncNaClass="no-ads";}
YUD.addClass(this.innerElement,ncNaClass);},getSpaceidFromLeague:function(league){switch(league){case'nba':return 2142154660;case'mlb':return 2142154652;case'nhl':return 2142154664;case'nfl':return 2142154661;default:return 25664825;}},addDarlaAd:function(){if(this.showAds()){this.footer.innerHTML='<div class="playernote-ft"><div id="'+this.getAdContainerId()+'" class="playernote-'+this.adPosition+'"><\/div><\/div>';}},delegateClickEvents:function(e,obj){var target=YUE.getTarget(e),anchor=null,oCompNav=obj.getCompNav();if(target.nodeName=='A'){anchor=target;}else if(target.nodeName=='IMG'){anchor=YUD.getAncestorByTagName(target,'a');}
if(oCompNav.compNav&&YUD.isAncestor(oCompNav.compNav,target)){for(var i=0;i<oCompNav.compNavItems.length;i++){if(target==oCompNav.compNavItems[i]||YUD.isAncestor(oCompNav.compNavItems[i],target)){obj.toggleComparisonView(i);}}}
var oLeagueNavs=obj.getLeagueNavs();if(!oLeagueNavs)return;if(oLeagueNavs.leagueNavContainer&&YUD.isAncestor(oLeagueNavs.leagueNavContainer,target)){if(YUD.hasClass(target,'fantasy-prev')){obj.bumpLeagues(-1);}
if(YUD.hasClass(target,'fantasy-next')){obj.bumpLeagues(1);}}},adjustScheduleTable:function(){var elSched=YUD.getElementsByClassName('teamsched','div',this.element)[0],elSchedTable=YUD.getElementsByClassName('teamtable','table',elSched)[0],elSchedTHead=elSchedTable.getElementsByTagName('thead')[0],elSchedBd=YUD.getElementsByClassName('teamsched-bd','div',elSched)[0],elCurGame=YUD.getElementsByClassName('current','tr',elSchedBd)[0],sched_y=YUD.getY(elSchedBd),cur_y=YUD.getY(elCurGame);var fake_exists=YUD.getElementsByClassName('faketable','table',elSched).length;if(!fake_exists){var elFakeTable=document.createElement('table'),elFakeTHead=elSchedTHead.cloneNode(true);th_count=elSchedTHead.getElementsByTagName('th').length;YUD.addClass(elFakeTable,'teamtable faketable thcount-'+th_count);elFakeTable.appendChild(elFakeTHead);YUD.insertBefore(elFakeTable,elSchedBd);}
var sched_h=elSchedBd.offsetHeight,table_h=elSchedTable.offsetHeight;if(table_h>sched_h){YUD.addClass(elSched,'with-scroll');if(YAHOO.env.ua.ie){elSchedTable.style.width='auto';}}
var oTScroll=new YAHOO.util.Scroll(elSchedBd,{scroll:{to:[0,(cur_y-sched_y)]}},0.25);oTScroll.animate();},bumpLeagues:function(direction){var oLeagueNavs=this.getLeagueNavs();if(direction>0){newIndex=oLeagueNavs.selectedIndex+1;if(newIndex>oLeagueNavs.max){newIndex=0;}}else{newIndex=oLeagueNavs.selectedIndex-1;if(newIndex<0){newIndex=oLeagueNavs.max;}}
YUD.removeClass(oLeagueNavs.leagueTitles[oLeagueNavs.selectedIndex],'selected');YUD.removeClass(oLeagueNavs.leagueLinks[oLeagueNavs.selectedIndex],'selected');YUD.addClass(oLeagueNavs.leagueTitles[newIndex],'selected');YUD.addClass(oLeagueNavs.leagueLinks[newIndex],'selected');},toggleComparisonView:function(pos){var oCompNav=this.getCompNav();YUD.removeClass(oCompNav.compNavItems[this.selectedComp],'selected');YUD.removeClass(oCompNav.compViews[this.selectedComp],'selected');YUD.addClass(oCompNav.compNavItems[pos],'selected');YUD.addClass(oCompNav.compViews[pos],'selected');this.selectedComp=pos;},showAds:function(){return true;},transformUrl:function(sUrl,sId,type){var sStrippedId=(''+sId).replace('ysp_playernote_','');sStrippedId=sStrippedId.substring(0,sStrippedId.indexOf('-'));var sLeague=sStrippedId.substring(0,sStrippedId.indexOf('.'));var newUrl='/playernote/service/'+sStrippedId;this.league=sLeague;if(YAHOO.Sports.playerNewsUrn){newUrl+='?article_urn='+YAHOO.Sports.playerNewsUrn;}
if(type=='comscore'){newUrl='/playernote_dynamic_view?pid='+sStrippedId+'&rand='+Math.random();}
return newUrl;},getCompNav:function(){var obj={};obj.compNav=YUD.getElementsByClassName('comp-nav','ul',this.element)[0];obj.compNavItems=(obj.compNav)?obj.compNav.getElementsByTagName('li'):null;obj.compViews=YUD.getElementsByClassName('comp-view','div',this.element);return obj;},getLeagueNavs:function(){var obj={};var bds=YUD.getElementsByClassName('fantasy-bd','div',this.element);if(bds.length==0)return;obj.leagueNav=bds[0];var navs=YUD.getElementsByClassName('fantasy-team-nav','div',obj.leagueNav);if(navs.length==0){obj.leagueNavContainer=false;return obj;}
obj.leagueNavContainer=navs[0];obj.leagueTitles=YUD.getElementsByClassName('fantasy-league','dl',obj.leagueNav);obj.leagueLinks=YUD.getElementsByClassName('fantasy-links','div',obj.leagueNav);obj.max=obj.leagueLinks.length-1;for(var x=0;x<=obj.max;x++){if(YUD.hasClass(obj.leagueLinks[x],'selected')){obj.selectedIndex=x;}}
return obj;},enhanceTeamNotes:function(){var team_notes=YUD.getElementsByClassName('teamnote','li',this.element);for(var i=0;i<team_notes.length;i++){var link=team_notes[i].getElementsByTagName('a')[0];if(!link.getAttribute('target')){link.setAttribute('target','sports');}}},generateContainer:function(){this.setBody('<p class="loading-note">Loading Player Data....<\/p>');this.setFooter('<div class="playernote-ft"><\/div>');this.addDarlaAd();this.hide();this.render(document.body);if(this.showAds()){YAHOO.Sports.Ads.Darla.registerAd(this.adPosition,this.getAdContainerId());YAHOO.Sports.Ads.Darla.subscribe(this.getAdContainerId(),"now",{'playernoteView':{lv:1,sp:this.getSpaceidFromLeague(this.league),ps:this.adPosition,em:escape('{"site-attribute":"content=no-expandable;"}')}});this.hideEvent.subscribe(function(){YAHOO.Sports.Ads.Darla.unregisterAd(this.adPosition,this.getAdContainerId());});}},populate:function(sData){try{var tempData=document.createElement('div');tempData.innerHTML=sData;var bdData=YUD.getElementsByClassName('dynamicnote','div',tempData)[0];var ftData=YUD.getElementsByClassName('playernotepromos','div',tempData)[0];this.body.innerHTML='';this.body.appendChild(bdData);if(!this.showAds()&&ftData!='undefined'){var footerEl=YUD.getElementsByClassName('playernote-ft','div',this.element)[0];if(footerEl){footerEl.innerHTML='';footerEl.appendChild(ftData);}}
tempData=null;this.setState('loaded');YUE.removeListener(this.element,'click',this.delegateClickEvents,this);YUE.addListener(this.element,'click',this.delegateClickEvents,this);this.enhanceTeamNotes();this.adjustScheduleTable();}catch(e){}},clear:function(){this.element.innerHTML='';},setState:function(state){switch(state){case'loading':this.generateContainer();this.show();break;}
YAHOO.Sports.PlayerNote.superclass.setState.call(this,state);}});